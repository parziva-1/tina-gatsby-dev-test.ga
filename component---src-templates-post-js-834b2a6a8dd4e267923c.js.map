{"version":3,"sources":["webpack:///./src/templates/post.js","webpack:///./src/components/useAuthors.js","webpack:///./src/components/authors.js"],"names":["Post","props","authors","useAuthors","page","data","markdownRemark","formOptions","actions","DeleteAction","fields","label","name","component","parse","media","filename","uploadDir","previewSrc","src","path","formValues","frontmatter","hero","image","childImageSharp","fluid","useRemarkForm","form","usePlugin","date","length","authorIDs","to","format","dangerouslySetInnerHTML","__html","html","draft","process","postQuery","settingsJson","ListAuthors","filter","author","find","id","map","index","AuthorsForm","itemProps","item","key","defaultItem","Math","random","toString","substr","email","link","value"],"mappings":"0jBA0GeA,UAtFf,SAAcC,GACZ,IAAMC,EAAUC,cACVC,EAAOH,EAAMI,KAAKC,eAClBC,EAAc,CAClBC,QAAS,CAACC,gBACVC,OAAQ,CACN,CACEC,MAAO,QACPC,KAAM,uBACNC,UAAW,QAEb,CACEF,MAAO,UACPC,KAAM,yBACNC,UAAW,UACXX,QAASA,GAEX,CACEU,KAAM,uBACNC,UAAW,SACXF,MAAO,SAET,CACEA,MAAO,OACPC,KAAM,sBACNC,UAAW,QAEb,CACEF,MAAO,aACPC,KAAM,4BACNC,UAAW,QACXC,MAAO,SAACC,GACN,OAAKA,EACC,aAAcA,EAAMC,SADP,IAGrBC,UAAW,qCACXC,WAAY,SAACC,EAAKC,EAAMC,GACtB,OACGA,EAAWC,YAAYC,MACvBF,EAAWC,YAAYC,KAAKC,MAGxBH,EAAWC,YAAYC,KAAKC,MAAMC,gBAAgBC,MAAMP,IADtD,OAzCE,EAgDEQ,wBAAcvB,EAAMG,GAAlCF,EAhDY,KAgDNuB,EAhDM,KAmDnB,OAFAC,oBAAUD,GAGR,kBAAC,aAAD,CAAYA,KAAMA,GAChB,kBAAC,IAAD,CAAYxB,KAAMC,GAChB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KAAWA,EAAKiB,YAAYQ,MAC3BzB,EAAKiB,YAAYpB,SAAWG,EAAKiB,YAAYpB,QAAQ6B,OAAS,GAC7D,kBAAC,IAAD,KACE,kCADF,IAEE,kBAAC,IAAD,CAAaC,UAAW3B,EAAKiB,YAAYpB,WAG7C,kBAAC,IAAD,KACE,kBAAC,OAAD,CAAM+B,GAAG,SAAT,oBAGJ,4BACE,kBAAC,kBAAD,CAAiBrB,KAAK,0BAExB,6BACA,kBAAC,gBAAD,CAAeA,KAAK,kBAAkBsB,OAAO,YAC3C,yBACEC,wBAAyB,CACvBC,OAAQ/B,EAAKgC,SAIlBhC,EAAKiB,YAAYgB,OAAS,kBAAC,IAAD,eAC1BC,MAOIvC,IAEFwC,EAAS,a,oFC1GTrC,EAAa,WAaxB,OAb8B,OACtBsC,aAYYvC,U,8JCbTwC,EAAc,SAAC,GAAmB,IAAjBV,EAAgB,EAAhBA,UACtB9B,EAAUC,cAAawC,QAAO,SAAAC,GAAM,OACxCZ,EAAUa,MAAK,SAAAC,GAAE,OAAIA,IAAOF,EAAOE,SAWrC,OARmB5C,EAAQ6C,KAAI,SAACH,EAAQI,GACtC,OAAI9C,EAAQ6B,SAAWiB,EAAQ,EACtBJ,EAAOhC,KAEPgC,EAAOhC,KAAO,SAOdqC,EAAc,CACzBtC,MAAO,UACPD,OAAQ,CACN,CACEC,MAAO,UACPC,KAAM,kBACNC,UAAW,aACXqC,UAAW,SAAAC,GAAI,MAAK,CAClBC,IAAKD,EAAKL,GACVnC,MAAOwC,EAAKvC,OAEdyC,YAAa,iBAAO,CAClBzC,KAAM,aACNkC,GAAIQ,KAAKC,SACNC,SAAS,IACTC,OAAO,EAAG,GACbC,MAAO,GACPC,KAAM,KAERjD,OAAQ,CACN,CACEC,MAAO,OACPC,KAAM,OACNC,UAAW,OACXC,MAJF,SAIQ8C,GACJ,OAAOA,GAAS,KAGpB,CACEjD,MAAO,QACPC,KAAM,QACNC,UAAW,OACXC,MAJF,SAIQ8C,GACJ,OAAOA,GAAS,KAGpB,CACEjD,MAAO,OACPC,KAAM,OACNC,UAAW,OACXC,MAJF,SAIQ8C,GACJ,OAAOA,GAAS","file":"component---src-templates-post-js-834b2a6a8dd4e267923c.js","sourcesContent":["import React from \"react\"\r\nimport { graphql, Link } from \"gatsby\"\r\n\r\nimport { usePlugin } from \"tinacms\"\r\nimport { useRemarkForm, DeleteAction } from \"gatsby-tinacms-remark\"\r\nimport { InlineForm, InlineTextField } from \"react-tinacms-inline\"\r\nimport { InlineWysiwyg } from \"react-tinacms-editor\"\r\n\r\nimport {\r\n  Paper,\r\n  Meta,\r\n  MetaSpan,\r\n  MetaActions,\r\n  DraftBadge,\r\n} from \"../components/style\"\r\nimport { EditToggle } from \"../components/editToggle\"\r\nimport { ListAuthors } from \"../components/authors\"\r\nimport { PageLayout } from \"../components/pageLayout\"\r\nimport { useAuthors } from \"../components/useAuthors\"\r\n\r\nfunction Post(props) {\r\n  const authors = useAuthors()\r\n  const page = props.data.markdownRemark\r\n  const formOptions = {\r\n    actions: [DeleteAction],\r\n    fields: [\r\n      {\r\n        label: \"Title\",\r\n        name: \"rawFrontmatter.title\",\r\n        component: \"text\",\r\n      },\r\n      {\r\n        label: \"Authors\",\r\n        name: \"rawFrontmatter.authors\",\r\n        component: \"authors\",\r\n        authors: authors,\r\n      },\r\n      {\r\n        name: \"rawFrontmatter.draft\",\r\n        component: \"toggle\",\r\n        label: \"Draft\",\r\n      },\r\n      {\r\n        label: \"Date\",\r\n        name: \"rawFrontmatter.date\",\r\n        component: \"date\",\r\n      },\r\n      {\r\n        label: \"Hero Image\",\r\n        name: \"rawFrontmatter.hero.image\",\r\n        component: \"image\",\r\n        parse: (media) => {\r\n          if (!media) return \"\"\r\n          return `../images/${media.filename}`\r\n        },\r\n        uploadDir: () => `/content/images/`,\r\n        previewSrc: (src, path, formValues) => {\r\n          if (\r\n            !formValues.frontmatter.hero ||\r\n            !formValues.frontmatter.hero.image\r\n          )\r\n            return \"\"\r\n          return formValues.frontmatter.hero.image.childImageSharp.fluid.src\r\n        },\r\n      },\r\n    ],\r\n  }\r\n\r\n  const [data, form] = useRemarkForm(page, formOptions)\r\n  usePlugin(form)\r\n\r\n  return (\r\n    <InlineForm form={form}>\r\n      <PageLayout page={data}>\r\n        <Paper>\r\n          <Meta>\r\n            <MetaSpan>{data.frontmatter.date}</MetaSpan>\r\n            {data.frontmatter.authors && data.frontmatter.authors.length > 0 && (\r\n              <MetaSpan>\r\n                <em>By</em>&nbsp;\r\n                <ListAuthors authorIDs={data.frontmatter.authors} />\r\n              </MetaSpan>\r\n            )}\r\n            <MetaActions>\r\n              <Link to=\"/blog\">‚Üê Back to Blog</Link>\r\n            </MetaActions>\r\n          </Meta>\r\n          <h1>\r\n            <InlineTextField name=\"rawFrontmatter.title\" />\r\n          </h1>\r\n          <hr />\r\n          <InlineWysiwyg name=\"rawMarkdownBody\" format=\"markdown\">\r\n            <div\r\n              dangerouslySetInnerHTML={{\r\n                __html: data.html,\r\n              }}\r\n            />\r\n          </InlineWysiwyg>\r\n          {data.frontmatter.draft && <DraftBadge>Draft</DraftBadge>}\r\n          {process.env.NODE_ENV !== \"production\" && <EditToggle />}\r\n        </Paper>\r\n      </PageLayout>\r\n    </InlineForm>\r\n  )\r\n}\r\n\r\nexport default Post\r\n\r\nexport const postQuery = graphql`\r\n  query($path: String!) {\r\n    markdownRemark(\r\n      published: { eq: true }\r\n      frontmatter: { path: { eq: $path } }\r\n    ) {\r\n      id\r\n      excerpt(pruneLength: 160)\r\n      html\r\n\r\n      frontmatter {\r\n        path\r\n        date(formatString: \"MMMM DD, YYYY\")\r\n        title\r\n        draft\r\n        authors\r\n        hero {\r\n          large\r\n          overlay\r\n          image {\r\n            childImageSharp {\r\n              fluid(quality: 70, maxWidth: 1920) {\r\n                ...GatsbyImageSharpFluid_withWebp\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      fileRelativePath\r\n      rawFrontmatter\r\n      rawMarkdownBody\r\n    }\r\n    settingsJson(fileRelativePath: { eq: \"/content/settings/authors.json\" }) {\r\n      ...authors\r\n    }\r\n  }\r\n`\r\n","import { useStaticQuery, graphql } from \"gatsby\"\r\n\r\nexport const useAuthors = () => {\r\n  const { settingsJson } = useStaticQuery(\r\n    graphql`\r\n      query authorsQuery {\r\n        settingsJson(\r\n          fileRelativePath: { eq: \"/content/settings/authors.json\" }\r\n        ) {\r\n          ...authors\r\n        }\r\n      }\r\n    `\r\n  )\r\n\r\n  return settingsJson.authors\r\n}\r\n\r\nexport const authorsFragment = graphql`\r\n  fragment authors on SettingsJson {\r\n    authors {\r\n      email\r\n      name\r\n      id\r\n      link\r\n    }\r\n  }\r\n`\r\n","import { useAuthors } from \"./useAuthors\"\r\n\r\nexport const ListAuthors = ({ authorIDs }) => {\r\n  const authors = useAuthors().filter(author =>\r\n    authorIDs.find(id => id === author.id)\r\n  )\r\n\r\n  const authorList = authors.map((author, index) => {\r\n    if (authors.length === index + 1) {\r\n      return author.name\r\n    } else {\r\n      return author.name + \", \"\r\n    }\r\n  })\r\n\r\n  return authorList\r\n}\r\n\r\nexport const AuthorsForm = {\r\n  label: \"Authors\",\r\n  fields: [\r\n    {\r\n      label: \"Authors\",\r\n      name: \"rawJson.authors\",\r\n      component: \"group-list\",\r\n      itemProps: item => ({\r\n        key: item.id,\r\n        label: item.name,\r\n      }),\r\n      defaultItem: () => ({\r\n        name: \"New Author\",\r\n        id: Math.random()\r\n          .toString(36)\r\n          .substr(2, 9),\r\n        email: \"\",\r\n        link: \"\",\r\n      }),\r\n      fields: [\r\n        {\r\n          label: \"Name\",\r\n          name: \"name\",\r\n          component: \"text\",\r\n          parse(value) {\r\n            return value || \"\"\r\n          },\r\n        },\r\n        {\r\n          label: \"Email\",\r\n          name: \"email\",\r\n          component: \"text\",\r\n          parse(value) {\r\n            return value || \"\"\r\n          },\r\n        },\r\n        {\r\n          label: \"Link\",\r\n          name: \"link\",\r\n          component: \"text\",\r\n          parse(value) {\r\n            return value || \"\"\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n}\r\n"],"sourceRoot":""}